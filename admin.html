<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Panel â€” Astrayudh</title>
<link rel="stylesheet" href="style.css">
<style>
body {
    font-family: 'Poppins', sans-serif;
    background: var(--background);
    color: var(--text);
    margin: 0;
    padding: 0;
}
.site-header {
    background: var(--card-bg);
    padding: 15px 40px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 2px 8px var(--shadow);
}
.site-header h1 {
    font-family: 'Playfair Display', serif;
    color: var(--accent);
}
.nav a { display:none; } /* Hide nav in admin */

.container {
    max-width: 1200px;
    margin: 40px auto;
    padding: 20px;
}

h2 { color: var(--accent); margin-bottom: 20px; }

.panel-section {
    background: var(--card-bg);
    padding: 20px;
    border-radius: 14px;
    box-shadow: 0 4px 12px var(--shadow);
    margin-bottom: 40px;
}

.panel-section h3 {
    font-family: 'Playfair Display', serif;
    margin-bottom: 15px;
}

input, textarea, select {
    width: 100%;
    padding: 10px;
    margin: 8px 0;
    border-radius: 8px;
    border: 1px solid #ccc;
    font-size: 1rem;
}

textarea { resize: vertical; }

button {
    padding: 10px 20px;
    margin-top: 10px;
    border: none;
    border-radius: 12px;
    background: var(--accent);
    color: #fff;
    cursor: pointer;
    font-weight: 500;
    transition: background 0.2s;
}
button:hover { background: var(--accent-hover); }

.list-item {
    border-bottom: 1px solid #eee;
    padding: 10px 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.list-item span { font-weight: 500; }
.list-item button { background: #e74c3c; }
.list-item button:hover { background: #c0392b; }

.chapter-container {
    margin-left: 20px;
    border-left: 2px dashed #ccc;
    padding-left: 15px;
}
</style>
</head>
<body>

<header class="site-header">
<h1>Admin Panel</h1>
</header>

<div class="container">

<!-- STORIES MANAGEMENT -->
<section class="panel-section" id="storiesPanel">
    <h2>Stories & Chapters</h2>

    <div>
        <h3>Add New Story</h3>
        <input type="text" id="storyTitle" placeholder="Story Title">
        <textarea id="storyDesc" placeholder="Story Description"></textarea>
        <input type="text" id="storyCover" placeholder="Cover Image URL">
        <button onclick="addStory()">Add Story</button>
    </div>

    <div id="storiesList">
        <!-- Existing stories will appear here -->
    </div>
</section>

<!-- BLOGS MANAGEMENT -->
<section class="panel-section" id="blogsPanel">
    <h2>Blogs</h2>

    <div>
        <h3>Add New Blog</h3>
        <input type="text" id="blogTitle" placeholder="Blog Title">
        <input type="text" id="blogExcerpt" placeholder="Blog Excerpt">
        <input type="text" id="blogCover" placeholder="Cover Image URL">
        <textarea id="blogContent" placeholder="Full Blog HTML content"></textarea>
        <button onclick="addBlog()">Add Blog</button>
    </div>

    <div id="blogsList">
        <!-- Existing blogs will appear here -->
    </div>
</section>

</div>

<script>
let data = {
    stories: [],
    blogs: []
};

// --- RENDER FUNCTIONS ---
function renderStories() {
    const container = document.getElementById('storiesList');
    container.innerHTML = '';
    data.stories.forEach((story, idx) => {
        const div = document.createElement('div');
        div.className = 'list-item';
        div.innerHTML = `
            <span>${story.title}</span>
            <div>
                <button onclick="deleteStory(${idx})">Delete</button>
                <button onclick="addChapter(${idx})">+Chapter</button>
            </div>
        `;

        // Chapters
        if(story.chapters && story.chapters.length > 0){
            const chaptersDiv = document.createElement('div');
            chaptersDiv.className = 'chapter-container';
            story.chapters.forEach((chap, cidx)=>{
                const chapDiv = document.createElement('div');
                chapDiv.className = 'list-item';
                chapDiv.innerHTML = `<span>${chap.title}</span> <button onclick="deleteChapter(${idx},${cidx})">Delete</button>`;
                chaptersDiv.appendChild(chapDiv);
            });
            div.appendChild(chaptersDiv);
        }

        container.appendChild(div);
    });
}

function renderBlogs() {
    const container = document.getElementById('blogsList');
    container.innerHTML = '';
    data.blogs.forEach((blog, idx)=>{
        const div = document.createElement('div');
        div.className = 'list-item';
        div.innerHTML = `<span>${blog.title}</span> <button onclick="deleteBlog(${idx})">Delete</button>`;
        container.appendChild(div);
    });
}

// --- CRUD FUNCTIONS ---
function addStory(){
    const title = document.getElementById('storyTitle').value.trim();
    const desc = document.getElementById('storyDesc').value.trim();
    const cover = document.getElementById('storyCover').value.trim();
    if(!title) return alert("Story title required!");
    data.stories.push({id:'story'+Date.now(), title, description: desc, cover, chapters: []});
    document.getElementById('storyTitle').value = '';
    document.getElementById('storyDesc').value = '';
    document.getElementById('storyCover').value = '';
    renderStories();
}

function deleteStory(idx){
    if(confirm("Delete this story?")) data.stories.splice(idx,1);
    renderStories();
}

function addChapter(storyIdx){
    const title = prompt("Chapter Title:");
    const content = prompt("Chapter Content (HTML allowed):");
    if(!title || !content) return;
    data.stories[storyIdx].chapters.push({id:'chap'+Date.now(), title, content});
    renderStories();
}

function deleteChapter(storyIdx, chapIdx){
    if(confirm("Delete this chapter?")) data.stories[storyIdx].chapters.splice(chapIdx,1);
    renderStories();
}

function addBlog(){
    const title = document.getElementById('blogTitle').value.trim();
    const excerpt = document.getElementById('blogExcerpt').value.trim();
    const cover = document.getElementById('blogCover').value.trim();
    const content = document.getElementById('blogContent').value.trim();
    if(!title || !excerpt || !content) return alert("All fields required!");
    data.blogs.push({id:'blog'+Date.now(), title, excerpt, cover, content});
    document.getElementById('blogTitle').value = '';
    document.getElementById('blogExcerpt').value = '';
    document.getElementById('blogCover').value = '';
    document.getElementById('blogContent').value = '';
    renderBlogs();
}

function deleteBlog(idx){
    if(confirm("Delete this blog?")) data.blogs.splice(idx,1);
    renderBlogs();
}

// Initial render
renderStories();
renderBlogs();
</script>

</body>
</html>
